"use strict";function GetHistoryCounterUpRecord(t,e){for(var a=[],t=t.data[e],e=t.counterUp,i=t.history.slice(-11),s=0;s<i.length;s++)a.push(i[s].scoredUp);return a.push(e),a}function GetTodoTasks(t){for(var e=[],a=0;a<t.length;a++){var i=t[a];i.type="todo",e.push(i)}return e}function GetTodaysTasks(t){for(var e=[],a=0;a<t.length;a++){var i=t[a],s=new Date;i.date==s&&e.push(i)}return e}function GetFlagTasks(t){for(var e=[],a=0;a<t.length;a++){var i=t[a];-1<i.tags.indexOf("7b2d53e9-1ca7-471f-95a1-b29bdd90b885")&&e.push(i)}return e}function generateCompletedArray(){for(var t=[],e=new Date,a=new Date(e.getTime()-5184e5);0<=e.getTime()-a.getTime();){var i=a.getFullYear(),s=1==(a.getMonth()+1).toString().length?"0"+(a.getMonth()+1).toString():(a.getMonth()+1).toString(),o=1==a.getDate().toString().length?"0"+a.getDate():a.getDate();t.push({date:i+"-"+s+"-"+o,times:0}),a.setDate(a.getDate()+1)}return t}function getDate(t){t=t.split("-");return new Date(t[0],t[1]-1,t[2])}function drawFitnessCircle(t){var e=document.getElementById("fitness-circle"),t={grid:{top:"0",right:"0"},angleAxis:{show:!1,max:20},radiusAxis:{show:!1,type:"category",data:["0","1","2","3"],z:10},polar:{},series:[{type:"bar",data:t,coordinateSystem:"polar",colorBy:"data",roundCap:!0,showBackground:!0}]};echarts.init(e).setOption(t)}function drawCompletedTasksChart(t,e){var a=document.getElementById("habitica-block-3"),e={tooltip:{trigger:"axis"},grid:[{top:"10%",height:"85%",left:"0%",bottom:"5%",right:"10%"}],xAxis:{show:!1,type:"category",boundaryGap:!1,data:t},yAxis:{show:!1,type:"value"},series:[{name:"Compeleted: ",type:"line",stack:"Total",smooth:!0,itemStyle:{color:"#83ccd2"},data:e}]};echarts.init(a).setOption(e)}function drawStatsChart(t,e,a){var i=document.getElementById("habitica-block-2"),t={tooltip:{trigger:"axis"},grid:[{top:"10%",height:"60%",left:"0%",bottom:"5%",right:"10%"}],xAxis:{show:!1,type:"value",boundaryGap:!1,max:100},yAxis:{show:!1,type:"category",data:["Exp","MP","HP"]},series:[{type:"bar",stack:"Total",smooth:!0,data:[{value:e/52*100,itemStyle:{color:"#74b9ff"}},{value:a/280*100,itemStyle:{color:"#f1c40f"}},{value:t/50*100,itemStyle:{color:"#ba5140"}}],showBackground:!0,backgroundStyle:{borderRadius:4},itemStyle:{borderRadius:4}}]};echarts.init(i).setOption(t)}function drawExerciseChart(t,e){var a=document.getElementById("fitness-line"),e={grid:[{top:"5%",height:"45%",left:"0%",right:"0%",show:!0,borderColor:"rgba(128, 128, 128, 0.4)",borderWidth:".1"},{bottom:"5%",height:"45%",left:"0%",right:"0%",show:!0,borderColor:"rgba(128, 128, 128, 0.4)",borderWidth:".1"}],xAxis:[{type:"category",data:["1","2","3","4","5","6","7","8","9","10","11","12"],gridIndex:0,axisLabel:{show:!1},splitLine:{show:!0,lineStyle:{width:".1",color:["rgba(128, 128, 128, 0.4)"]}},axisLine:{onZero:!1,show:!1,lineStyle:{width:".1",color:["rgba(128, 128, 128, 0.4)"]}},axisTick:{show:!1}},{type:"category",data:["1","2","3","4","5","6","7","8","9","10","11","12"],gridIndex:1,axisLine:{onZero:!1,show:!1,lineStyle:{width:".1",color:["rgba(128, 128, 128, 0.4)"]}},axisTick:{show:!1},axisLabel:{show:!0,inside:!1},splitLine:{show:!0,lineStyle:{width:".1",color:["rgba(128, 128, 128, 0.4)"]}}}],yAxis:[{type:"value",gridIndex:0,show:!1,max:35},{type:"value",gridIndex:1,show:!1,max:35}],series:[{name:"Meditation",type:"bar",data:t,xAxisIndex:1,yAxisIndex:1,itemStyle:{borderRadius:[4,4,0,0]},markLine:{data:[{type:"average",name:"Avg"}],width:.1,symbol:"none",lineStyle:{opacity:.5}}},{name:"Fitness",type:"bar",data:e,xAxisIndex:0,yAxisIndex:0,itemStyle:{borderRadius:[4,4,0,0]},markLine:{data:[{type:"average",name:"Avg"}],width:.1,symbol:"none",lineStyle:{opacity:.5}}}]};echarts.init(a).setOption(e)}$.ajax({url:"https://habitica.com/api/v3/tasks/user",type:"GET",dataType:"json",cache:!1,beforeSend:function(t){t.setRequestHeader("x-client","5daf7fb2-df95-4ad4-a157-f7c6809b4907-ZKPEACE"),t.setRequestHeader("x-api-user","5daf7fb2-df95-4ad4-a157-f7c6809b4907"),t.setRequestHeader("x-api-key","7defefe4-e90c-4f05-9174-bb23e1c9ea1a")},success:function(t){console.log(t),fitness_times_history=GetHistoryCounterUpRecord(t,0),meditation_times_history=GetHistoryCounterUpRecord(t,1),basketball_times_history=GetHistoryCounterUpRecord(t,2),drawExerciseChart(fitness_times_history,meditation_times_history);var e=[0,basketball_times_history[basketball_times_history.length-1],meditation_times_history[meditation_times_history.length-1],fitness_times_history[fitness_times_history.length-1]];$("#meditation-times").html(e[2]+" Times"),$("#fitness-times").html(e[3]+" Times"),$("#others-times").html(e[1]+" Times"),drawFitnessCircle(e);var a=GetTodoTasks(t.data),e=GetTodaysTasks(a),t=GetFlagTasks(a);$("#all").html("<div class='logo'><i class='fas fa-inbox'></i></div> <div class='num'>"+a.length+"</div> <div class='title'>All</div>"),$("#plan").html("<div class='logo'><i class='fas fa-calendar-alt'></i></div> <div class='num'>"+a.length+"</div> <div class='title'>Todo</div>"),$("#today").html("<div class='logo'><i class='fas fa-calendar-day'></i></div> <div class='num'>"+e.length+"</div> <div class='title'>Today</div>"),$("#flag").html("<div class='logo'><i class='fas fa-star'></i></div> <div class='num'>"+t.length+"</div> <div class='title'>Flag</div>")}}),$.ajax({url:"https://habitica.com/export/userdata.json",type:"GET",dataType:"json",cache:!1,beforeSend:function(t){t.setRequestHeader("x-client","5daf7fb2-df95-4ad4-a157-f7c6809b4907-ZKPEACE"),t.setRequestHeader("x-api-user","5daf7fb2-df95-4ad4-a157-f7c6809b4907"),t.setRequestHeader("x-api-key","7defefe4-e90c-4f05-9174-bb23e1c9ea1a")},success:function(t){for(var e=[],a=[],i=t.profile.name,s=t.stats,o=t.tasks.todos,r=generateCompletedArray(),d=0;d<o.length;d++)if(o[d].completed)for(var l=o[d].dateCompleted.substr(0,10),n=0;n<r.length;n++)l==r[n].date&&r[n].times++;for(var c=0;c<r.length;c++)e.push(r[c].times),a.push(r[c].date);$("#habitica-block-1").html("<div class='habitic-profile'>"+i+"</div><div class='habitic-class'>CLASS : ROGUE</div><div class='habitic-level'>LEVEL : "+s.lvl+"</div><div id='habitic-profile-stats' class='habitic-stats'></div>"),$("#habitica-block-4").html('<div class="today-todo-title-1">TODAY</div><a class="today-todo-num">'+e[e.length-1]+'</a><div class="today-todo-title-2"><p class="today-todo-kill">KILLED</p><p>tasks was</p></div>'),drawCompletedTasksChart(a,e),drawStatsChart(s.hp,s.mp,s.exp)}});